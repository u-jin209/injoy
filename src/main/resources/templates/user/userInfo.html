<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org" lang="ko"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <title>UserInfo</title>
    <!-- 내 css  -->
    <link th:href="@{/css/injoyMain.css}" rel="stylesheet"/>

<!--    이미지 크롭하기 -->
    <link rel="stylesheet" href=https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.css>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.js"></script>
</head>
<body>
<div layout:fragment="content">

    <div class="container " style="content-align: center; padding: 2%;">
        <h1 class="title">프로필</h1>
        <div class="row mb-5" style="justify-content: right">
            <button class="btn-orange" type="button" style="width: 85px;height: 30px;" data-toggle="modal" data-target="#memberModal">정보수정</button>
        </div>
        <div class="row ">

            <div class="col" style="float: left ;margin-bottom: 50px">
                <div class="row" style="justify-content: center;">


                    <div id="profile_container" class="memberImgDiv"><img id="profile" class="memberImgDiv"th:src="@{${user.profilePhoto}}", onerror=this.src="/img/user.jpg">
                    </div>
                </div>

                <div class="row" style="justify-content: center;">
                    <div class="task-tooltip" style=" text-align: center; min-width: 250px;   min-height: 30px;">
                        <div th:text="${user.condition}"></div>
                    </div>
                </div>
            </div>
            <div class="col" style="    text-align: -webkit-center;">



                <div class="memberInfo row">

                    <div class="col" style="    display: flex;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="#303030 "
                             class="bi bi-person-fill" viewBox="0 0 16 16">
                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                        </svg>
                    </div>
                    <div class="col">
                        <p class="contentText" th:text="${user.getName()}"></p>
                    </div>
                </div>



                <div class="memberInfo row"  >

                    <div class="col" style="    display: flex;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="#303030"
                             class="bi bi-building-fill" viewBox="0 0 16 16">
                            <path d="M3 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h3v-3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V16h3a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H3Zm1 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5ZM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM7.5 5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM4.5 8h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Z"/>
                        </svg>
                    </div>
                    <div class="col">
                        <p class="contentText" th:text="${user.getUsername()}">sssss</p>
                    </div>
                </div>


                <div class="memberInfo row">

                    <div class="col" style="    display: flex;">
                        <svg xmlns="http://www.w3.org/2000/svg" style="" width="50" height="50" fill="#303030"
                             class="bi bi-telephone-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                        </svg>
                    </div>
                    <div class="col">
                        <p class="contentText" th:text="${user.getPhoneNumber()}"></p>
                    </div>
                </div>


                <div class="memberInfo row">
                    <div class="col" style="    display: flex;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="#303030"
                             class="bi bi-envelope-paper-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M6.5 9.5 3 7.5v-6A1.5 1.5 0 0 1 4.5 0h7A1.5 1.5 0 0 1 13 1.5v6l-3.5 2L8 8.75l-1.5.75ZM1.059 3.635 2 3.133v3.753L0 5.713V5.4a2 2 0 0 1 1.059-1.765ZM16 5.713l-2 1.173V3.133l.941.502A2 2 0 0 1 16 5.4v.313Zm0 1.16-5.693 3.337L16 13.372v-6.5Zm-8 3.199 7.941 4.412A2 2 0 0 1 14 16H2a2 2 0 0 1-1.941-1.516L8 10.072Zm-8 3.3 5.693-3.162L0 6.873v6.5Z"/>
                        </svg>
                    </div>
                    <div class="col">
                        <p class="contentText" th:text="${user.getEmail()}"></p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form action="/user/updateInfo" method="post" onsubmit=""   enctype="multipart/form-data">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">정보 수정</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body scrollDiv" style="height: 700px;overflow-y: scroll  ">
                        <div class="row mt-3 mb-3" style="justify-content: center; ">
                            <div class="col-md-10">
                                <div class="col" style="float: left">
                                    <div class="row contentText">사진</div>
                                    <div class="row mb-3" style="justify-content: center;">


                                        <div id="image_container" class="memberImgDiv"><img id="image-show" class="memberImgDiv"
                                                                                       th:src="@{${user.profilePhoto}}",onerror=this.src="/img/user.jpg">
                                        </div>
                                    </div>
                                    <div class="row" style="margin: 5px;justify-content: center;">
                                        <input style="  text-align-last: center;" type="file" id="profileImg"
                                               name="profileImg"
                                               accept="image/*"
                                               onchange="toBase64(event);"/>
<!--                                        <input type="file" class="real-upload" accept="image/*" -->
<!--                                               id="mainImgInput" name="mainFile">-->

                                    </div>
                                    <div class="row contentText"> 상태</div>
                                    <div class="row mb-5" style="justify-content: center;">
                                        <div class="task-tooltip" style="text-align-last: center;">
                                            <input type="text" class="form-control"
                                                   style="background: none;border: none;" id="condition"
                                                   name="condition" th:value="${user.getCondition()}"
                                                   placeholder="상태를 입력해주세요">
                                        </div>
                                    </div>
                                    <div class="row contentText"> 이름</div>
                                    <div class="row">

                                        <div class="memberInfo row" style="float:left;">

                                            <div class="col-md-3" style="    display: flex;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
                                                     fill="#303030 "
                                                     class="bi bi-person-fill" viewBox="0 0 16 16">
                                                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
                                                </svg>
                                            </div>
                                            <div class="col-md-9">
                                                <input type="text" class="form-control" id="name"
                                                       name="name" th:value="${user.getName()}"
                                                       placeholder="이름을 입력해주세요">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row contentText"> 직급/회사</div>
                                    <div class="row">

                                        <div class="memberInfo row" style="float:left;">

                                            <div class="col-md-3" style="    display: flex;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
                                                     fill="#303030"
                                                     class="bi bi-building-fill" viewBox="0 0 16 16">
                                                    <path d="M3 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h3v-3.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V16h3a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H3Zm1 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5ZM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM7.5 5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM4.5 8h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm3.5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5Z"/>
                                                </svg>
                                            </div>
                                            <div class="col-md-9">
                                                <input type="text" class="form-control" id="organ"
                                                       name="organ" th:value="${user.getEmail()}"
                                                       placeholder="직급/소속을 입력해주세요">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row contentText"> 전화</div>
                                    <div class="row">
                                        <div class="memberInfo row" style="float:left;">

                                            <div class="col-md-3" style="    display: flex;">
                                                <svg xmlns="http://www.w3.org/2000/svg" style="" width="50" height="50"
                                                     fill="#303030"
                                                     class="bi bi-telephone-fill" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd"
                                                          d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                                                </svg>
                                            </div>
                                            <div class="col-md-9">
                                                <input type="text" class="form-control" id="phoneNumber"
                                                       name="phoneNumber" th:value="${user.getPhoneNumber()}"
                                                       placeholder="번호를 입력해주세요">
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row contentText"> 이메일</div>
                                    <div class="row">
                                        <div class="memberInfo row" style="float:left;">
                                            <div class="col-md-3" style="    display: flex;">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
                                                     fill="#303030"
                                                     class="bi bi-envelope-paper-fill" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd"
                                                          d="M6.5 9.5 3 7.5v-6A1.5 1.5 0 0 1 4.5 0h7A1.5 1.5 0 0 1 13 1.5v6l-3.5 2L8 8.75l-1.5.75ZM1.059 3.635 2 3.133v3.753L0 5.713V5.4a2 2 0 0 1 1.059-1.765ZM16 5.713l-2 1.173V3.133l.941.502A2 2 0 0 1 16 5.4v.313Zm0 1.16-5.693 3.337L16 13.372v-6.5Zm-8 3.199 7.941 4.412A2 2 0 0 1 14 16H2a2 2 0 0 1-1.941-1.516L8 10.072Zm-8 3.3 5.693-3.162L0 6.873v6.5Z"/>
                                                </svg>
                                            </div>
                                            <div class="col-md-9">
                                                <input type="text" class="form-control" id="email"
                                                       name="email" th:value="${user.getEmail()}"
                                                       placeholder="email을 입력해주세요">
                                            </div>

                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="submit" class="btn btn-secondary">수정</button>

                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>


        function setThumbnail(event) {
            var reader = new FileReader();

            reader.onload = function (event) {
                var img = document.getElementById("image-show")
                img.setAttribute("src", event.target.result);
                document.querySelector("div#image_container").appendChild(img);
            };

            reader.readAsDataURL(event.target.files[0]);
        }




        function toBase64(event) {
            var reader = new FileReader();
            reader.readAsDataURL(event.target.files[0]);
            reader.onload = function(event) {
                var base64 = event.target.result;// img -> base64
                var img = document.getElementById("image-show")
                img.setAttribute("src", base64);

                const profilePhoto = document.getElementById("profilePhoto")
                profilePhoto.setAttribute("value", base64.toString())

            };
        }


        function submitOk(){
            Swal.fire({
                title: "수정 완료되었습니다 ",
                icon: "success"
            });
        }
    </script>


</div>

</body>


</html>
