<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>프로젝트 채팅방</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' rel='stylesheet'>
    <style>
        @font-face {
            font-family: 'Pretendard-Regular';
            src: url('https://cdn.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
            font-weight: 400;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            border-collapse: collapse;
            box-sizing: border-box;
            font-family: 'Pretendard-Regular', serif;
        }

        body {

        }

        .wrap {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100vh;
            min-width: 350px;
        }

        header {

            width: 100%;
            height: 64px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 19px;
            border-bottom: 0.5px solid #d2d0d0;
            box-shadow: 0px 0px 3px #d7d5d5;
        }

        .header_title {
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .header_title_right {
            margin-left: 15px;
        }

        .header_title_right div {
            display: flex;
            flex-direction: row;
            align-items: center;
            color: #9b9b9b;

        }

        main {
            flex: 1;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: end;
            padding: 0 30px;
            overflow: auto;
            overflow-x: hidden;
        }

        footer {
            border-top: #eae9e9 solid 0.5px;
            width: 100%;
            /*height: 120px;*/
            min-height: 120px;

            background-color: #f8f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 25px 0;
        }

        footer div {
            background-color: white;
            width: 90%;
            min-height: 80%;
            border: 0.5px solid #d2d0d0;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        form {
            padding: 0 15px;
            width: 100%;
            height: 75%;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            box-sizing: border-box;
        }

        textarea {
            border: none;
            resize: none;
            outline: none;
            overflow: hidden;
            width: 100%;
            padding-top: 12px;
        }

        textarea::placeholder {
            font-size: 15px;
            color: #a8a8a8;
        }

        p {
            margin: 0;
        }

        .header_menu {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }

        .bi-list {
            margin-left: 12px;
        }

        .btn_send {
            width: 62px;
            height: 52px;
            background-color: #efefef;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            margin-left: 15px;
            color: #989898;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        button:enabled {
            /* 버튼 활성화 스타일 */
            background-color: #3064b3;
            color: white;
        }

        #slideMenu {
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            right: -330px;
            width: 330px;
            height: 100vh;
            background-color: white;
            z-index: 10;
            transition: right 0.3s ease; /* 애니메이션 효과를 위한 transition 설정 */
            box-sizing: border-box;
        }

        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* 어두운 배경색 설정 */
            z-index: 1; /* 다른 요소보다 위에 위치하도록 z-index 설정 */
            display: none; /* 기본적으로 숨김 처리 */
        }

        .slide_header {
            width: 100%;
            height: 100px;
            background-color: #3064b3;
        }

        .slide_main {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: auto;
            overflow-x: hidden;
        }

        .slide_footer {
            width: 100%;
            height: 50px;
            background-color: #f8f7f7;
            border-top: #eae9e9 solid 0.5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        a {
            text-decoration: none;
        }

        .bi-box-arrow-right {
            position: relative;
        }

        .exit_link {
            position: relative;
        }

        .exit_link::after {
            content: attr(data-tooltip);
            display: none;
            position: absolute;
            top: -35px; /* 말풍선의 위치 조정 */
            left: 0;
            padding: 5px;
            background-color: white;
            white-space: nowrap;
            color: #4d4c4c;
            border: 0.3px solid #4d4c4c;
            border-radius: 4px;
            font-size: 14px;
        }

        .exit_link:hover::after {
            display: block;
        }

        .project_link_box {
            width: 100%;
            height: 40px;
            border: 0.4px solid #d2d0d0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
        }

        .project_link_box a {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;
        }

        .slide_main_member_count {
            width: 100%;
            margin-top: 30px;
            font-size: 15px;
            margin-bottom: 20px;
        }

        .slide_member_box {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: auto;
            overflow-x: hidden;
        }

        .bi-chat-dots {
            margin-right: 5px;
        }

        .slide_member_box_li {
            width: 100%;
            height: 50px;
            display: flex;
            flex-direction: row;
            align-items: center;
            border-bottom: 0.4px solid #d2d0d0;
            margin-bottom: 15px;
        }

        .slide_member_box_li_project_member {
            display: flex;
            flex-direction: row;
            width: 85%;
            height: 40px;
            justify-content: space-between;
            align-items: center;
            padding-left: 10px;

        }

        .slide_member_box_li div p {
            color: #545353;
            font-weight: bold;
            font-size: 15px;
        }

        .slide_member_box_li_imgBox {
            width: 40px;
            height: 40px;
            overflow: hidden;
            border-radius: 30%;
            border: 0.3px solid #e3e2e2;
        }

        .slide_member_box_li_imgBox img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .chat_right {
            width: 100%;
            min-width: 350px;
            min-height: 44px;
            margin-top: 20px;
            display: flex;
            justify-content: end;
        }

        .chat_right_message {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 30px 5px 30px 30px;
            min-width: 52px;
            max-width: 300px;
            height: 100%;
            background-color: rgb(236, 236, 255);
            padding: 15px;
            word-break: break-all;
            font-size: 15px;
        }

        .chat_right_message p {
            margin: 0;
        }

        .chat_left {
            display: flex;
            flex-direction: row;
            width: 100%;
            min-width: 350px;
            margin-top: 15px;
        }

        .chat_left_img {
            width: 40px;
            height: 40px;
            position: relative;
            overflow: hidden;
        }

        .chat_left_img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 30%;
            border: 0.3px solid #e3e2e2;
        }

        .chat_left_member {
            min-height: 44px;
            display: flex;
            flex-direction: column;
            margin-left: 10px;

        }

        .chat_left_member_name {
            font-weight: bold;
            font-size: 15px;
        }

        .chat_left_message {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px 30px 30px 30px;
            min-width: 52px;
            max-width: 300px;
            height: 100%;
            background-color: rgb(255, 240, 211);
            padding: 15px;
            word-break: break-all;
            font-size: 15px;
            margin-top: 8px;
        }
    </style>
</head>
<body>
<div class="wrap">
    <div id="slideMenu">
        <div class="slide_header">
        </div>
        <div class="slide_main">

            <div class="project_link_box">
                <a href="#">
                    프로젝트 바로가기
                </a>
            </div>

            <div class="slide_main_member_count">
                <p style="font-weight: bold">참여자<span style="font-weight: lighter;color: grey">(3)</span></p>
            </div>
            <div class="slide_member_box">
                <div class="slide_member_box_li">
                    <div class="slide_member_box_li_imgBox">
                        <img src="/img/injoy-blue.png">
                    </div>
                    <div class="slide_member_box_li_project_member">
                        <p>최준서</p>

                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                             class="bi bi-chat-dots" viewBox="0 0 16 16">
                            <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"/>
                        </svg>
                    </div>
                </div>
                <div class="slide_member_box_li">
                    <div class="slide_member_box_li_imgBox">
                        <img src="/img/injoy-blue.png">
                    </div>
                    <div class="slide_member_box_li_project_member">
                        <p>최준서</p>

                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                             class="bi bi-chat-dots" viewBox="0 0 16 16">
                            <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="slide_footer">

            <a href="#" class="exit_link" data-tooltip="채팅방 나가기">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" fill="#3064b3"
                     class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                    <path fill-rule="evenodd"
                          d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                </svg>
            </a>
        </div>
    </div>
    <div id="overlay"></div>
    <header>
        <div class="header_title">
            <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" fill="#3064b3"
                 class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
            </svg>
            <div class="header_title_right">
                <p style="font-weight: bold">프로젝트 채팅방</p>
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor"
                         class="bi bi-person"
                         viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
                    </svg>
                    <p style="font-size: 13px;font-weight: lighter;margin-left: 4px;font-weight: lighter">3</p>
                </div>
            </div>

        </div>
        <div class="header_menu" id="toggleButton3">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search"
                 viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
            </svg>
            <svg id="toggleButton" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                 class="bi bi-list"
                 viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                      d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
            </svg>
        </div>
    </header>
    <main>
        <div class="chat_right">
            <div class="chat_right_message"><p>pp</p></div>
        </div>
        <div class="chat_left">
            <div class="chat_left_img"><img src="/img/injoy_blue.png"></div>
            <div class="chat_left_member">
                <p class="chat_left_member_name">아무개</p>
                <div class="chat_left_message"><p>pp</p></div>
            </div>
        </div>

    </main>
    <footer>
        <div>
            <form action="#" method="post">
                <textarea id="myTextarea" placeholder="줄바꿈 Shift + Enter / 입력 Enter 입니다."
                          oninput="checkInput()"></textarea>
                <button class="btn_send" type="submit" id="submitButton" disabled>전송</button>
            </form>

        </div>
    </footer>
</div>
<script>
    const textarea = document.getElementById("myTextarea");
    const submitButton = document.getElementById("submitButton");
    const slideMenu = document.getElementById("slideMenu");
    const toggleButton = document.getElementById("toggleButton");
    const body = document.body;
    const overlay = document.getElementById("overlay");

    window.onload = function () {
        slideMenu.style.right = "-330px";
    };

    toggleButton.addEventListener("click", function (event) {
        event.stopPropagation(); // 이벤트 전파 중단
        openSlideMenu();
    });

    // 슬라이드 메뉴 외부 클릭 이벤트 등록
    document.body.addEventListener("click", function (event) {
        const slideMenu = document.getElementById("slideMenu");
        const isClickedInsideMenu = slideMenu.contains(event.target);

        if (!isClickedInsideMenu) {
            closeSlideMenu();
        }
    });

    function openSlideMenu() {
        slideMenu.style.right = slideMenu.style.right === "-330px" ? "0" : "-330px";
        overlay.style.display = "block"; // 레이어 표시
    }

    function closeSlideMenu() {
        // 슬라이드 메뉴를 닫는 동작 수행
        slideMenu.style.right = "-330px";
        overlay.style.display = "none"; // 레이어 숨김
    }

    //Shif Enter 줄바꿈
    textarea.addEventListener("keydown", function (event) {
        if (event.key === "Enter" && !event.shiftKey) {
            event.preventDefault(); // 기본 엔터 동작 제거
            document.getElementById("submitButton").click(); // 전송 버튼 클릭
        }
        if (event.key === "Enter" && event.shiftKey) {
            event.preventDefault();
            const currentValue = this.value;
            this.value = currentValue + "\n";
        }
    });

    //버튼 비활성화
    function checkInput() {

        if (textarea.value.trim() !== "") {
            submitButton.disabled = false;
        } else {
            submitButton.disabled = true;
        }
        autoResize(textarea)
    }

    function autoResize(textarea) {
        textarea.style.height = "auto"; // 초기 높이로 설정하여 높이를 재조정하기 위해 초기화

        // 스크롤 높이와 컨텐츠 높이 비교하여 크기 조정
        textarea.style.height = textarea.scrollHeight + "px";
    }
</script>
</body>
</html>